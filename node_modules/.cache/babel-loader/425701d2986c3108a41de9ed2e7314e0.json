{"ast":null,"code":"import _regeneratorRuntime from\"/Users/uchennaibe/Desktop/youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/uchennaibe/Desktop/youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/uchennaibe/Desktop/youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import'./_videoHorizontal.scss';import{AiFillEye}from'react-icons/ai';import request from'../../api';import moment from'moment';import numeral from'numeral';import{LazyLoadImage}from'react-lazy-load-image-component';import{Col,Row}from'react-bootstrap';import{useHistory}from'react-router-dom';var VideoHorizontal=function VideoHorizontal(_ref){var video=_ref.video,searchScreen=_ref.searchScreen,subScreen=_ref.subScreen;var id=video.id,_video$snippet=video.snippet,channelId=_video$snippet.channelId,channelTitle=_video$snippet.channelTitle,description=_video$snippet.description,title=_video$snippet.title,publishedAt=_video$snippet.publishedAt,medium=_video$snippet.thumbnails.medium,resourceId=_video$snippet.resourceId;var isVideo=!(id.kind==='youtube#channel'||subScreen);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),views=_useState2[0],setViews=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),duration=_useState4[0],setDuration=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),channelIcon=_useState6[0],setChannelIcon=_useState6[1];useEffect(function(){var get_video_details=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$request,items;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request('/videos',{params:{part:'contentDetails,statistics',id:id.videoId}});case 2:_yield$request=_context.sent;items=_yield$request.data.items;setDuration(items[0].contentDetails.duration);setViews(items[0].statistics.viewCount);case 6:case\"end\":return _context.stop();}}},_callee);}));return function get_video_details(){return _ref2.apply(this,arguments);};}();if(isVideo)get_video_details();},[id,isVideo]);useEffect(function(){var get_channel_icon=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$request2,items;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return request('/channels',{params:{part:'snippet',id:channelId}});case 2:_yield$request2=_context2.sent;items=_yield$request2.data.items;setChannelIcon(items[0].snippet.thumbnails.default);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function get_channel_icon(){return _ref3.apply(this,arguments);};}();get_channel_icon();},[channelId]);var seconds=moment.duration(duration).asSeconds();var _duration=moment.utc(seconds*1000).format('mm:ss');var history=useHistory();var _channelId=(resourceId===null||resourceId===void 0?void 0:resourceId.channelId)||channelId;var handleClick=function handleClick(){isVideo?history.push(\"/watch/\".concat(id.videoId)):history.push(\"/channel/\".concat(_channelId));};var thumbnail=!isVideo&&'videoHorizontal__thumbnail-channel';return/*#__PURE__*/_jsxs(Row,{className:\"py-2 m-1 videoHorizontal align-items-center\",onClick:handleClick,children:[/*#__PURE__*/_jsxs(Col,{xs:6,md:searchScreen||subScreen?4:6,className:\"videoHorizontal__left\",children:[/*#__PURE__*/_jsx(LazyLoadImage,{src:medium.url,effect:\"blur\",className:\"videoHorizontal__thumbnail \".concat(thumbnail,\" \"),wrapperClassName:\"videoHorizontal__thumbnail-wrapper\"}),isVideo&&/*#__PURE__*/_jsx(\"span\",{className:\"videoHorizontal__duration\",children:_duration})]}),/*#__PURE__*/_jsxs(Col,{xs:6,md:searchScreen||subScreen?8:6,className:\"p-0 videoHorizontal__right\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-1 videoHorizontal__title\",children:title}),isVideo&&/*#__PURE__*/_jsxs(\"div\",{className:\"videoHorizontal__details\",children:[/*#__PURE__*/_jsx(AiFillEye,{}),\" \",numeral(views).format('0.a'),\" Views \\u2022\",moment(publishedAt).fromNow()]}),(searchScreen||subScreen)&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 videoHorizontal__desc\",children:description}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-1 videoHorizontal__channel d-flex align-items-center\",children:[isVideo&&/*#__PURE__*/_jsx(LazyLoadImage,{src:channelIcon===null||channelIcon===void 0?void 0:channelIcon.url,effect:\"blur\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:channelTitle})]}),subScreen&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2\",children:[video.contentDetails.totalItemCount,\" Videos\"]})]})]});};export default VideoHorizontal;","map":{"version":3,"sources":["/Users/uchennaibe/Desktop/youtube/src/components/videoHorizontal/VideoHorizontal.js"],"names":["React","useEffect","useState","AiFillEye","request","moment","numeral","LazyLoadImage","Col","Row","useHistory","VideoHorizontal","video","searchScreen","subScreen","id","snippet","channelId","channelTitle","description","title","publishedAt","medium","thumbnails","resourceId","isVideo","kind","views","setViews","duration","setDuration","channelIcon","setChannelIcon","get_video_details","params","part","videoId","items","data","contentDetails","statistics","viewCount","get_channel_icon","default","seconds","asSeconds","_duration","utc","format","history","_channelId","handleClick","push","thumbnail","url","fromNow","totalItemCount"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './_videoHorizontal.scss'\n\nimport { AiFillEye } from 'react-icons/ai'\nimport request from '../../api'\n\nimport moment from 'moment'\nimport numeral from 'numeral'\nimport { LazyLoadImage } from 'react-lazy-load-image-component'\nimport { Col, Row } from 'react-bootstrap'\nimport { useHistory } from 'react-router-dom'\n\nconst VideoHorizontal = ({ video, searchScreen, subScreen }) => {\n   const {\n      id,\n      snippet: {\n         channelId,\n         channelTitle,\n         description,\n         title,\n         publishedAt,\n         thumbnails: { medium },\n         resourceId,\n      },\n   } = video\n\n   const isVideo = !(id.kind === 'youtube#channel' || subScreen)\n\n   const [views, setViews] = useState(null)\n   const [duration, setDuration] = useState(null)\n   const [channelIcon, setChannelIcon] = useState(null)\n\n   useEffect(() => {\n      const get_video_details = async () => {\n         const {\n            data: { items },\n         } = await request('/videos', {\n            params: {\n               part: 'contentDetails,statistics',\n               id: id.videoId,\n            },\n         })\n         setDuration(items[0].contentDetails.duration)\n         setViews(items[0].statistics.viewCount)\n      }\n      if (isVideo) get_video_details()\n   }, [id, isVideo])\n\n   useEffect(() => {\n      const get_channel_icon = async () => {\n         const {\n            data: { items },\n         } = await request('/channels', {\n            params: {\n               part: 'snippet',\n               id: channelId,\n            },\n         })\n         setChannelIcon(items[0].snippet.thumbnails.default)\n      }\n      get_channel_icon()\n   }, [channelId])\n\n   const seconds = moment.duration(duration).asSeconds()\n   const _duration = moment.utc(seconds * 1000).format('mm:ss')\n\n   const history = useHistory()\n\n   const _channelId = resourceId?.channelId || channelId\n\n   const handleClick = () => {\n      isVideo\n         ? history.push(`/watch/${id.videoId}`)\n         : history.push(`/channel/${_channelId}`)\n   }\n\n   const thumbnail = !isVideo && 'videoHorizontal__thumbnail-channel'\n\n   return (\n      <Row\n         className='py-2 m-1 videoHorizontal align-items-center'\n         onClick={handleClick}>\n         {/* //TODO refractor grid */}\n         <Col\n            xs={6}\n            md={searchScreen || subScreen ? 4 : 6}\n            className='videoHorizontal__left'>\n            <LazyLoadImage\n               src={medium.url}\n               effect='blur'\n               className={`videoHorizontal__thumbnail ${thumbnail} `}\n               wrapperClassName='videoHorizontal__thumbnail-wrapper'\n            />\n            {isVideo && (\n               <span className='videoHorizontal__duration'>{_duration}</span>\n            )}\n         </Col>\n         <Col\n            xs={6}\n            md={searchScreen || subScreen ? 8 : 6}\n            className='p-0 videoHorizontal__right'>\n            <p className='mb-1 videoHorizontal__title'>{title}</p>\n\n            {isVideo && (\n               <div className='videoHorizontal__details'>\n                  <AiFillEye /> {numeral(views).format('0.a')} Views •\n                  {moment(publishedAt).fromNow()}\n               </div>\n            )}\n\n            {(searchScreen || subScreen) && (\n               <p className='mt-1 videoHorizontal__desc'>{description}</p>\n            )}\n\n            <div className='my-1 videoHorizontal__channel d-flex align-items-center'>\n               {isVideo && (\n                  <LazyLoadImage src={channelIcon?.url} effect='blur' />\n               )}\n               <p className='mb-0'>{channelTitle}</p>\n            </div>\n            {subScreen && (\n               <p className='mt-2'>\n                  {video.contentDetails.totalItemCount} Videos\n               </p>\n            )}\n         </Col>\n      </Row>\n   )\n}\n\nexport default VideoHorizontal\n"]},"metadata":{},"sourceType":"module"}