{"ast":null,"code":"import _slicedToArray from\"/Users/uchennaibe/Desktop/youtube/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{addComment,getCommentsOfVideoById}from'../../redux/actions/comments.action';import Comment from'../comment/Comment';import'./_comments.scss';var Comments=function Comments(_ref){var videoId=_ref.videoId,totalComments=_ref.totalComments;var dispatch=useDispatch();useEffect(function(){dispatch(getCommentsOfVideoById(videoId));},[videoId,dispatch]);var comments=useSelector(function(state){return state.commentList.comments;});var _useSelector=useSelector(function(state){var _state$auth;return(_state$auth=state.auth)===null||_state$auth===void 0?void 0:_state$auth.user;}),photoURL=_useSelector.photoURL;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _comments=comments===null||comments===void 0?void 0:comments.map(function(comment){return comment.snippet.topLevelComment.snippet;});var handleComment=function handleComment(e){e.preventDefault();if(text.length===0)return;dispatch(addComment(videoId,text));setText('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"comments\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[totalComments,\" Comments\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-2 comments__form d-flex w-100\",children:[/*#__PURE__*/_jsx(\"img\",{src:photoURL,alt:\"avatar\",className:\"mr-3 rounded-circle\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleComment,className:\"d-flex flex-grow-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"flex-grow-1\",placeholder:\"Write a comment...\",value:text,onChange:function onChange(e){return setText(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"p-2 border-0\",children:\"Comment\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comments__list\",children:_comments===null||_comments===void 0?void 0:_comments.map(function(comment,i){return/*#__PURE__*/_jsx(Comment,{comment:comment},i);})})]});};export default Comments;","map":{"version":3,"sources":["/Users/uchennaibe/Desktop/youtube/src/components/comments/Comments.js"],"names":["React","useEffect","useState","useDispatch","useSelector","addComment","getCommentsOfVideoById","Comment","Comments","videoId","totalComments","dispatch","comments","state","commentList","auth","user","photoURL","text","setText","_comments","map","comment","snippet","topLevelComment","handleComment","e","preventDefault","length","target","value","i"],"mappings":"gPAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OACGC,UADH,CAEGC,sBAFH,KAGO,qCAHP,CAIA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,MAAO,kBAAP,CACA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAAgC,IAA7BC,CAAAA,OAA6B,MAA7BA,OAA6B,CAApBC,aAAoB,MAApBA,aAAoB,CAC9C,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEAF,SAAS,CAAC,UAAM,CACbU,QAAQ,CAACL,sBAAsB,CAACG,OAAD,CAAvB,CAAR,CACF,CAFQ,CAEN,CAACA,OAAD,CAAUE,QAAV,CAFM,CAAT,CAIA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,CAAC,SAAAS,KAAK,QAAIA,CAAAA,KAAK,CAACC,WAAN,CAAkBF,QAAtB,EAAN,CAA5B,CAP8C,iBAQzBR,WAAW,CAAC,SAAAS,KAAK,qCAAIA,KAAK,CAACE,IAAV,sCAAI,YAAYC,IAAhB,EAAN,CARc,CAQtCC,QARsC,cAQtCA,QARsC,eAUtBf,QAAQ,CAAC,EAAD,CAVc,wCAUvCgB,IAVuC,eAUjCC,OAViC,eAY9C,GAAMC,CAAAA,SAAS,CAAGR,QAAH,SAAGA,QAAH,iBAAGA,QAAQ,CAAES,GAAV,CACf,SAAAC,OAAO,QAAIA,CAAAA,OAAO,CAACC,OAAR,CAAgBC,eAAhB,CAAgCD,OAApC,EADQ,CAAlB,CAIA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,CAAC,CAAI,CACxBA,CAAC,CAACC,cAAF,GACA,GAAIT,IAAI,CAACU,MAAL,GAAgB,CAApB,CAAuB,OAEvBjB,QAAQ,CAACN,UAAU,CAACI,OAAD,CAAUS,IAAV,CAAX,CAAR,CAEAC,OAAO,CAAC,EAAD,CAAP,CACF,CAPD,CAQA,mBACG,aAAK,SAAS,CAAC,UAAf,wBACG,qBAAIT,aAAJ,eADH,cAEG,aAAK,SAAS,CAAC,kCAAf,wBACG,YAAK,GAAG,CAAEO,QAAV,CAAoB,GAAG,CAAC,QAAxB,CAAiC,SAAS,CAAC,qBAA3C,EADH,cAEG,cAAM,QAAQ,CAAEQ,aAAhB,CAA+B,SAAS,CAAC,oBAAzC,wBACG,cACG,IAAI,CAAC,MADR,CAEG,SAAS,CAAC,aAFb,CAGG,WAAW,CAAC,oBAHf,CAIG,KAAK,CAAEP,IAJV,CAKG,QAAQ,CAAE,kBAAAQ,CAAC,QAAIP,CAAAA,OAAO,CAACO,CAAC,CAACG,MAAF,CAASC,KAAV,CAAX,EALd,EADH,cAQG,eAAQ,SAAS,CAAC,cAAlB,qBARH,GAFH,GAFH,cAeG,YAAK,SAAS,CAAC,gBAAf,UACIV,SADJ,SACIA,SADJ,iBACIA,SAAS,CAAEC,GAAX,CAAe,SAACC,OAAD,CAAUS,CAAV,qBACb,KAAC,OAAD,EAAS,OAAO,CAAET,OAAlB,EAAgCS,CAAhC,CADa,EAAf,CADJ,EAfH,GADH,CAuBF,CA/CD,CAiDA,cAAevB,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {\n   addComment,\n   getCommentsOfVideoById,\n} from '../../redux/actions/comments.action'\nimport Comment from '../comment/Comment'\nimport './_comments.scss'\nconst Comments = ({ videoId, totalComments }) => {\n   const dispatch = useDispatch()\n\n   useEffect(() => {\n      dispatch(getCommentsOfVideoById(videoId))\n   }, [videoId, dispatch])\n\n   const comments = useSelector(state => state.commentList.comments)\n   const { photoURL } = useSelector(state => state.auth?.user)\n\n   const [text, setText] = useState('')\n\n   const _comments = comments?.map(\n      comment => comment.snippet.topLevelComment.snippet\n   )\n\n   const handleComment = e => {\n      e.preventDefault()\n      if (text.length === 0) return\n\n      dispatch(addComment(videoId, text))\n\n      setText('')\n   }\n   return (\n      <div className='comments'>\n         <p>{totalComments} Comments</p>\n         <div className='my-2 comments__form d-flex w-100'>\n            <img src={photoURL} alt='avatar' className='mr-3 rounded-circle' />\n            <form onSubmit={handleComment} className='d-flex flex-grow-1'>\n               <input\n                  type='text'\n                  className='flex-grow-1'\n                  placeholder='Write a comment...'\n                  value={text}\n                  onChange={e => setText(e.target.value)}\n               />\n               <button className='p-2 border-0'>Comment</button>\n            </form>\n         </div>\n         <div className='comments__list'>\n            {_comments?.map((comment, i) => (\n               <Comment comment={comment} key={i} />\n            ))}\n         </div>\n      </div>\n   )\n}\n\nexport default Comments\n"]},"metadata":{},"sourceType":"module"}